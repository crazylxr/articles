# 图片优化

## 前言

在大多数的 web 页面中，图片占到了页面大小的60%-70%。因此在web开发中，不同的场景使用合适的图片格式对web页面的性能和体验是很重要的。有时候你花大力气去配置 webpack 使打包体积减少，不如好好优化几张图片，这篇文章就是让你明白如何选择正确的图片，并且让你明白这么多图片格式，在什么场景下使用什么格式。

## 基本概念

在进入正题之前，先聊聊一些图片相关的基本概念。

### 颜色表

### 真彩色

### 根据压缩分类

- 无压缩。
- 无损压缩。
- 有损压缩。

#### 无压缩

无压缩的图片格式不对图片数据进行压缩处理，能准确地呈现原图片。BMP格式就是其中之一。

#### 有损压缩

指在压缩文件大小的过程中，损失了一部分图片的信息，也即降低了图片的质量，并且这种损失是不可逆的，我们不可能从有一个有损压缩过的图片中恢复出全来的图片。

常见的有损压缩手段，是按照一定的算法将临近的像素点进行合并。压缩算法不会对图片所有的数据进行编码压缩，而是在压缩的时候，去除了人眼无法识别的图片细节。因此有损压缩可以在同等图片质量的情况下大幅降低图片的尺寸。其中的代表是 jpg。

#### 无损压缩

只在压缩文件大小的过程中，图片的质量没有任何损耗。我们任何时候都可以从无损压缩过的图片中恢复出原来的信息。

压缩算法对图片的所有的数据进行编码压缩，能在保证图片的质量的同时降低图片的尺寸。

png 是其中的代表。

### 根据图的类型分类

- 点阵图(位图)
- 矢量图

#### 点阵图(位图)

点阵图，也叫做位图，像素图。构成点阵图的最小单位是像素，位图就是由像素阵列的排列来实现其显示效果的，每个象素有自己的颜色信息，在对位图图像进行编辑操作的时候，可操作的对象是每个像素，我们可以改变图像的色相、饱和度、明度，从而改变图像的显示效果。

点阵图缩放会失真，用最近非常流行的沙画来比喻最恰当不过，当你从远处看的时候，画面细腻多彩，但是当你靠的非常近的时候，你就能看到组成画面的每粒沙子以及每个沙粒的颜色。

常见的比如：jpg、png、webp等，我们平时遇到的大多数都是**位图**。

#### 矢量图

矢量图，也叫做向量图。矢量图并不纪录画面上每一点的信息，而是纪录了元素形状及颜色的算法，当你打开一付矢量图的时候，软件对图形象对应的函数进行运算，将运算结果[图形的形状和颜色]显示给你看。

无论显示画面是大还是小，画面上的对象对应的算法是不变的，所以，即使对画面进行倍数相当大的缩放，其显示效果仍然相同(不失真)。

常见的就是 svg 格式的。

### 透明与半透明

## JPG/JPEG

连续和基线概念

**照片大图用有损压缩的JPG**。

## png

PNG对于线条图，LOGO，图标和颜色较少的图像非常适合

PNG另一个优点是支持透明背景

## Base64



## gif

GIF 的特性是**帧动画**。

采用LZW压缩算法进行编码，是一种无损的基于索引色的图片格式

## webp

## svg

## 为什么颜色越多，文件体积越大？

## 附加内容

1. **sRGB**



## 总结

其中APNG和WebP格式出现的较晚，尚未被Web标准所采纳，只有在特定平台或浏览器环境可以预知的情况下加以采用，虽然均可以在不支持的环境中较好的功能降级，但本节暂不讨论这两种格式。图片格式选择过程如下：

| 图片格式 | 压缩方式 | 透明度 | 动画   | 浏览器兼容                                  | 适应场景                                          |
| :------- | :------- | :----- | :----- | :------------------------------------------ | :------------------------------------------------ |
| JPEG     | 有损压缩 | 不支持 | 不支持 | 所有                                        | 复杂颜色及形状、尤其是照片                        |
| GIF      | 无损压缩 | 支持   | 支持   | 所有                                        | 简单颜色，动画                                    |
| PNG      | 无损压缩 | 支持   | 不支持 | 所有                                        | 需要透明时                                        |
| APNG     | 无损压缩 | 支持   | 支持   | Firefox Safari iOS Safari                   | 需要半透明效果的动画                              |
| WebP     | 有损压缩 | 支持   | 支持   | Chrome Opera Android Chrome Android Browser | 复杂颜色及形状 浏览器平台可预知                   |
| SVG      | 无损压缩 | 支持   | 支持   | 所有（IE8以上）                             | 简单图形，需要良好的放缩体验 需要动态控制图片特效 |

![](<https://image-static.segmentfault.com/999/814/999814740-5493f6b4e013f>)



## 参考链接

- [赵鑫](<https://www.zhihu.com/question/20028452>)