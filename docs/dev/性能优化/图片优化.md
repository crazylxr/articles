# 图片优化

## 前言

在大多数的web页面中，图片占到了页面大小的60%-70%。因此在web开发中，不同的场景使用合适的图片格式对web页面的性能和体验是很重要的。图片格式种类非常多，本文仅针对几种web应用中常用的图片格式：gif、png、jpg、webp进行一个基本的总结。

## 图片格式分类

- 无压缩。无压缩的图片格式不对图片数据进行压缩处理，能准确地呈现原图片。BMP格式就是其中之一。
- 无损压缩。压缩算法对图片的所有的数据进行编码压缩，能在保证图片的质量的同时降低图片的尺寸。png是其中的代表。
- 有损压缩。压缩算法不会对图片所有的数据进行编码压缩，而是在压缩的时候，去除了人眼无法识别的图片细节。因此有损压缩可以在同等图片质量的情况下大幅降低图片的尺寸。其中的代表是jpg。

## 基本概念

### 颜色表

### 真彩色

### 有损压缩

### 无损压缩

### 透明与半透明



## JPG/JPEG

连续和基线概念

**照片大图用有损压缩的JPG**。

## png

PNG对于线条图，LOGO，图标和颜色较少的图像非常适合

PNG另一个优点是支持透明背景

## gif

GIF 的特性是**帧动画**。

采用LZW压缩算法进行编码，是一种无损的基于索引色的图片格式

## webp

## svg

## 为什么颜色越多，文件体积越大？

## 附加内容

1. **sRGB**



## 总结

其中APNG和WebP格式出现的较晚，尚未被Web标准所采纳，只有在特定平台或浏览器环境可以预知的情况下加以采用，虽然均可以在不支持的环境中较好的功能降级，但本节暂不讨论这两种格式。图片格式选择过程如下：

| 图片格式 | 压缩方式 | 透明度 | 动画   | 浏览器兼容                                  | 适应场景                                          |
| :------- | :------- | :----- | :----- | :------------------------------------------ | :------------------------------------------------ |
| JPEG     | 有损压缩 | 不支持 | 不支持 | 所有                                        | 复杂颜色及形状、尤其是照片                        |
| GIF      | 无损压缩 | 支持   | 支持   | 所有                                        | 简单颜色，动画                                    |
| PNG      | 无损压缩 | 支持   | 不支持 | 所有                                        | 需要透明时                                        |
| APNG     | 无损压缩 | 支持   | 支持   | Firefox Safari iOS Safari                   | 需要半透明效果的动画                              |
| WebP     | 有损压缩 | 支持   | 支持   | Chrome Opera Android Chrome Android Browser | 复杂颜色及形状 浏览器平台可预知                   |
| SVG      | 无损压缩 | 支持   | 支持   | 所有（IE8以上）                             | 简单图形，需要良好的放缩体验 需要动态控制图片特效 |

![](<https://image-static.segmentfault.com/999/814/999814740-5493f6b4e013f>)